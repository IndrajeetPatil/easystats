---
output: 
  github_document:
    toc: false
    fig_width: 10.08
    fig_height: 6
tags: [r, reports]
vignette: >
  \usepackage[utf8]{inputenc}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

# easystats

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  fig.path = "man/figures/"
)
options(knitr.kable.NA = '',
        digits = 4,
        width=60)
```

```{r echo=FALSE, fig.show='hold', fig.align='left', out.width="14%", out.height="14%"}
# knitr::include_graphics(c("https://github.com/easystats/insight/raw/master/man/figures/logo.png",
#                           "https://github.com/easystats/bayestestR/raw/master/man/figures/logo.png",
#                           "https://github.com/easystats/parameters/raw/master/man/figures/logo.png",
#                           "https://github.com/easystats/performance/raw/master/man/figures/logo.png",
#                           "https://github.com/easystats/estimate/raw/master/man/figures/logo.png",
#                           "https://github.com/easystats/correlation/raw/master/man/figures/logo.png",
#                           "https://github.com/easystats/report/raw/master/man/figures/logo.png"))
# 

# library(png)
# library(grid)
# library(gridExtra)
# library(RCurl)
# 
# insight <-  rasterGrob(as.raster(readPNG(getURLContent("https://github.com/easystats/insight/raw/master/man/figures/logo.png"))), interpolate = FALSE)
# bayestestR <-  rasterGrob(as.raster(readPNG(getURLContent("https://github.com/easystats/bayestestR/raw/master/man/figures/logo.png"))), interpolate = FALSE)
# grid.arrange(insight, bayestestR, ncol = 1)
```

<img src='https://github.com/easystats/insight/raw/master/man/figures/logo.png' align="left" height="120" />
<img src='https://github.com/easystats/bayestestR/raw/master/man/figures/logo.png' align="left" height="120" />
<img src='https://github.com/easystats/parameters/raw/master/man/figures/logo.png' align="left" height="120" />
<img src='https://github.com/easystats/performance/raw/master/man/figures/logo.png' align="left" height="120" />
<img src='https://github.com/easystats/estimate/raw/master/man/figures/logo.png' align="left" height="120" />
<img src='https://github.com/easystats/correlation/raw/master/man/figures/logo.png' align="left" height="120" />
<img src='https://github.com/easystats/see/raw/master/man/figures/logo.png' align="left" height="120" />
<img src='https://github.com/easystats/report/raw/master/man/figures/logo.png' align="left" height="120" />

<br /><br /><br /><br /><br />

The aim of **easystats** is to provide a unifying and consistent framework to tame, discipline and harness the scary R statistics and their pesky models.


# Installation

The wole `easystats` suite can be installed *at once* with the following:

```r
install.packages("devtools")
devtools::install_github("easystats/easystats")
```

```r
library("easystats")
```

# Downloads 


```{r message=FALSE, warning=FALSE, include=TRUE, results="hide", echo=FALSE}
library(tidyverse)
library(zoo)
library(cranlogs)
library(rstanarm)
library(see)

# Packages data
downloads_insight <- cranlogs::cran_downloads(package = "insight", from = "2019-03-01") %>% 
  mutate(Package = "insight")
downloads_bayestestR <- cranlogs::cran_downloads(package = "bayestestR", from = "2019-04-08") %>% 
  mutate(Package = "bayestestR")

# Combine all data
data <- rbind(downloads_insight,
              downloads_bayestestR) %>% 
  group_by(Package) %>% 
  mutate(cumulative_count = cumsum(count),
         average_count = zoo::rollmax(count, 10, fill=0)+10,
         day_num = as.numeric(date) - min(as.numeric(date)),
         day = weekdays(date),
         month = months(date),
         quarters = quarters(date),
         month_day = lubridate::mday(date)) %>% 
  ungroup()


events <- data.frame()
color_CRAN <- "#4CAF50"
color_blog <- "#FF5722"

# Publications
events <- rbind(events,
               data.frame(date = as.Date(c("2019-03-05", "2019-04-09")), 
                          event=c("CRAN - insight (0.1.0)", "CRAN - BayestestR (0.1.0)"), 
                          color=color_CRAN, stringsAsFactors = FALSE))
# Blogposts
blogposts <- tidyRSS::tidyfeed("https://easystats.github.io/blog/categories/r/index.xml") %>% 
  filter(item_date_published > "2019-03-29") %>% 
  select(date = item_date_published,
         event = item_title) %>% 
  mutate(color=color_blog)

events <- rbind(events,
                blogposts)

# Full join
data <- full_join(data, events, by="date")
```

### Trend
```{r, message=FALSE, warning=FALSE, eval = TRUE, fig.align='center', echo=FALSE, dpi=300}
# TIME TREND
data %>% 
  ggplot(aes(x=date, color=Package)) +
  # geom_hline(yintercept=0) +
  geom_line(aes(y=count), size=0.75) +
  # geom_line(aes(y=count_Median), size=1, colour="blue") +
  geom_smooth(aes(y=count), method = 'loess', size=1.75, se=FALSE) +
  geom_vline(data=events, aes(xintercept = events$date), colour=events$color, size=1) +
  geom_label(aes(label = event, x = date, y = average_count), fill = data$color, colour = "white", fontface="bold") +
  see::theme_modern() +
  scale_x_date(date_breaks = "1 month", 
               # limits = as.Date(c('2011-01-01','2013-01-01')),
               labels=scales::date_format("%Y-%m")) +
  scale_color_manual(values=c("insight" = "#9C27B0",
                              "bayestestR" = "#E91E63")) +
  xlab("") +
  ylab("Daily CRAN Downloads\n")
```


### By Week Day
```{r, message=FALSE, warning=FALSE, eval = TRUE, fig.align='center', echo=FALSE, dpi=300}
junk <- capture.output(model <- rstanarm::stan_glm(count ~ day, data=data))

estimate::estimate_means(model) %>% 
  mutate(day = fct_relevel(day, "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday")) %>% 
  ggplot(aes(x=day, y=Median, group=1)) +
  geom_ribbon(aes(ymin=CI_low, ymax=CI_high), alpha=0.1) +
  geom_line() +
  theme_classic() +
  xlab("") +
  ylab("CRAN Downloads\n")
```


# List of functions



```{r echo=FALSE, message=FALSE, warning=FALSE, results='asis'}
# it would be cool to add the title / description for all functions
library(insight)
library(bayestestR)
library(parameters)
library(performance)
library(correlation)
library(estimate)
library(report)

all_funs <- data.frame()

for(package in c("insight", "bayestestR", "parameters", "performance", "correlation", "estimate", "report")){
  
  name <- lsf.str(paste0("package:", package))
  name <- unlist(strsplit(name, " "))
  
  functions <- paste0("[**`", 
                      name, 
                      "`**](https://easystats.github.io/", 
                      package, 
                      "/reference/index.html)",
                      " *(",
                      package,
                      ")*")
  
  functions <- data.frame("Functions" = functions,
                          "Package" = package,
                          "Name" = name)
  

  all_funs <- rbind(all_funs, functions)
}



all_funs <- all_funs[!duplicated(all_funs$Name),]
all_funs <- sort(as.character(all_funs$Functions))
cat(paste0(c("", all_funs), collapse = "\n- "))
```

